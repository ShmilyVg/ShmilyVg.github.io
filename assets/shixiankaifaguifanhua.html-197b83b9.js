import{_ as p,n as o,p as i,q as c,s,R as n,t as e,Z as t}from"./framework-eb6cfbb5.js";const l={},r=t(`<h1 id="代码规范" tabindex="-1"><a class="header-anchor" href="#代码规范" aria-hidden="true">#</a> 代码规范</h1><h1 id="editorconfig-配置" tabindex="-1"><a class="header-anchor" href="#editorconfig-配置" aria-hidden="true">#</a> EditorConfig 配置</h1><p>EditorConfig 有助于为不同 IDE 编辑器上处理同一项目的多个开发人员维护一致的编码风格。</p><p>在项目根目录下增加 <code>.editorconfig</code> 文件：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># Editor configuration, see http://editorconfig.org</span>

<span class="token comment"># 表示是最顶层的 EditorConfig 配置文件</span>
root <span class="token operator">=</span> <span class="token boolean">true</span>

<span class="token punctuation">[</span>*<span class="token punctuation">]</span> <span class="token comment"># 表示所有文件适用</span>
charset <span class="token operator">=</span> utf-8 <span class="token comment"># 设置文件字符集为 utf-8</span>
indent_style <span class="token operator">=</span> space <span class="token comment"># 缩进风格（tab | space）</span>
indent_size <span class="token operator">=</span> <span class="token number">2</span> <span class="token comment"># 缩进大小</span>
end_of_line <span class="token operator">=</span> lf <span class="token comment"># 控制换行类型(lf | cr | crlf)</span>
trim_trailing_whitespace <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token comment"># 去除行首的任意空白字符</span>
insert_final_newline <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token comment"># 始终在文件末尾插入一个新行</span>

<span class="token punctuation">[</span>*.md<span class="token punctuation">]</span> <span class="token comment"># 表示仅 md 文件适用以下规则</span>
max_line_length <span class="token operator">=</span> off
trim_trailing_whitespace <span class="token operator">=</span> <span class="token boolean">false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><em>注意：VSCode 使用 EditorConfig 需要去插件市场下载插件 <strong>EditorConfig for VS Code</strong> 。</em></p><h1 id="prettier-配置" tabindex="-1"><a class="header-anchor" href="#prettier-配置" aria-hidden="true">#</a> Prettier 配置</h1><p>Prettier 是一款强大的代码格式化工具，支持 JavaScript、TypeScript、CSS、SCSS、Less、JSX、Angular、Vue、GraphQL、JSON、Markdown 等语言，基本上前端能用到的文件格式它都可以搞定，是当下最流行的代码格式化工具</p><ol><li>安装 Prettier</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> i prettier <span class="token parameter variable">-D</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,10),d={start:"2"},u=s("code",null,".prettierrc",-1),m={href:"https://link.juejin.cn/?target=https%3A%2F%2Fprettier.io%2Fdocs%2Fen%2Foptions.html",target:"_blank",rel:"noopener noreferrer"},k=t(`<div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;useTabs&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;tabWidth&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token property">&quot;printWidth&quot;</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
  <span class="token property">&quot;singleQuote&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;trailingComma&quot;</span><span class="token operator">:</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;bracketSpacing&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;semi&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
复制代码
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>Prettier 安装且配置好之后，就能使用命令来格式化代码</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 格式化所有文件（. 表示所有文件）</span>
npx prettier <span class="token parameter variable">--write</span> <span class="token builtin class-name">.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><em>注意：VSCode 编辑器使用 Prettier 配置需要下载插件 <strong>Prettier - Code formatter</strong></em></p><h1 id="eslint-配置" tabindex="-1"><a class="header-anchor" href="#eslint-配置" aria-hidden="true">#</a> ESLint 配置</h1>`,5),v={href:"https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Feslint%2Feslint",target:"_blank",rel:"noopener noreferrer"},b=t(`<ol><li><p>安装 ESLint，可以全局或者本地安装，推荐本地安装（只在当前项目中安装）。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> i eslint <span class="token parameter variable">-D</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>配置 ESLint</p><p>ESLint 安装成功后，执行 <code>npx eslint --init</code>，然后按照终端操作提示完成一系列设置来创建配置文件。</p><p>ESLint 配置文件 <code>.eslintrc.js</code></p><p>在<strong>上一步</strong>操作完成后，会在项目根目录下自动生成 <code>.eslintrc.js</code> 配置文件：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">env</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">browser</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">es2021</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">node</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;plugin:vue/essential&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;airbnb-base&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">parserOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">ecmaVersion</span><span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span>
    <span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token string">&#39;@typescript-eslint/parser&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">sourceType</span><span class="token operator">:</span> <span class="token string">&#39;module&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;vue&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;@typescript-eslint&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><p><em>注意：VSCode 使用 ESLint 配置文件需要去插件市场下载插件 <strong>ESLint</strong> 。</em></p><h1 id="解决-prettier-和-eslint-的冲突" tabindex="-1"><a class="header-anchor" href="#解决-prettier-和-eslint-的冲突" aria-hidden="true">#</a> 解决 Prettier 和 ESLint 的冲突</h1><p>解决两者冲突问题，需要用到 <strong>eslint-plugin-prettier</strong> 和 <strong>eslint-config-prettier</strong>。</p><ul><li><code>eslint-plugin-prettier</code> 将 Prettier 的规则设置到 ESLint 的规则中。</li><li><code>eslint-config-prettier</code> 关闭 ESLint 中与 Prettier 中会发生冲突的规则。</li></ul><p>最后形成优先级：<code>Prettier 配置规则</code> &gt; <code>ESLint 配置规则</code>。</p><ul><li><p>安装插件</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> i eslint-plugin-prettier eslint-config-prettier <span class="token parameter variable">-D</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>在 <code>.eslintrc.js</code> 添加 prettier 插件</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&#39;plugin:vue/essential&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;airbnb-base&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;plugin:prettier/recommended&#39;</span> <span class="token comment">// 添加 prettier 插件</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p>在执行 <code>eslint --fix</code> 命令时，ESLint 就会按照 Prettier 的配置规则来格式化代码，轻松解决二者冲突问题。</p><h1 id="集成-husky-和-lint-staged" tabindex="-1"><a class="header-anchor" href="#集成-husky-和-lint-staged" aria-hidden="true">#</a> 集成 husky 和 lint-staged</h1>`,9),g={href:"https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Ftypicode%2Fhusky",target:"_blank",rel:"noopener noreferrer"},h=s("code",null,"pre-commit",-1),f=s("code",null,"commit-msg",-1),y=s("code",null,"pre-push",-1),x={href:"https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fokonet%2Flint-staged",target:"_blank",rel:"noopener noreferrer"},j=t(`<h2 id="配置-husky" tabindex="-1"><a class="header-anchor" href="#配置-husky" aria-hidden="true">#</a> 配置 husky</h2><p>使用 <code>husky-init</code> 命令快速在项目初始化一个 husky 配置。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>npx husky-init <span class="token operator">&amp;&amp;</span> <span class="token function">npm</span> <span class="token function">install</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>这行命令做了四件事：</p><ol><li>安装 husky 到开发依赖 <img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/53b54bb5faed46e8ab15bb87be709f03~tplv-k3u1fbpfcp-zoom-1.image" alt="image"></li><li>在项目根目录下创建 <code>.husky</code> 目录 <img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/79b7c15af1474e0780110eec19d61ef4~tplv-k3u1fbpfcp-zoom-1.image" alt="image"></li><li>在 <code>.husky</code> 目录创建 <code>pre-commit</code> hook，并初始化 <code>pre-commit</code> 命令为 <code>npm test</code> <img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/41617237db044ffab673d030078fc9b8~tplv-k3u1fbpfcp-zoom-1.image" alt="image"></li><li>修改 <code>package.json</code> 的 <code>scripts</code>，增加 <code>&quot;prepare&quot;: &quot;husky install&quot;</code> <img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2a8e3095a8b9471b8b6995055dd9ca2d~tplv-k3u1fbpfcp-zoom-1.image" alt="image"></li></ol><h2 id="配置-lint-staged" tabindex="-1"><a class="header-anchor" href="#配置-lint-staged" aria-hidden="true">#</a> 配置 lint-staged</h2><p>lint-staged 这个工具一般结合 husky 来使用，它可以让 husky 的 <code>hook</code> 触发的命令只作用于 <code>git add</code>那些文件（即 git 暂存区的文件），而不会影响到其他文件。</p><ol><li>安装 lint-staged</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> i lint-staged <span class="token parameter variable">-D</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li>在 <code>package.json</code>里增加 lint-staged 配置项</li></ol><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/34f5b846e6e7429aa111e173b12ef30e~tplv-k3u1fbpfcp-zoom-1.image" alt="image"></p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token property">&quot;lint-staged&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;*.{vue,js,ts}&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eslint --fix&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>这行命令表示：只对 git 暂存区的 <code>.vue</code>、<code>.js</code>、<code>.ts</code> 文件执行 <code>eslint --fix</code>。修改 <code>.husky/pre-commit</code> hook 的触发命令为：<code>npx lint-staged</code></li></ol><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f888eaf311614d0ba93bbe3744438b11~tplv-k3u1fbpfcp-zoom-1.image" alt="image"></p><h1 id="提交规范" tabindex="-1"><a class="header-anchor" href="#提交规范" aria-hidden="true">#</a> 提交规范</h1><h1 id="commit-message-格式规范" tabindex="-1"><a class="header-anchor" href="#commit-message-格式规范" aria-hidden="true">#</a> commit message 格式规范</h1><p>commit message 由 Header、Body、Footer 组成。</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>&lt;Header&gt;

&lt;Body&gt;

&lt;Footer&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="header" tabindex="-1"><a class="header-anchor" href="#header" aria-hidden="true">#</a> Header</h2><p>Header 部分包括三个字段 type（必需）、scope（可选）和 subject（必需）。</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>&lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="type" tabindex="-1"><a class="header-anchor" href="#type" aria-hidden="true">#</a> type</h3><p>type 用于说明 commit 的提交类型（必须是以下几种之一）。</p><table><thead><tr><th>值</th><th>描述</th></tr></thead><tbody><tr><td>feat</td><td>新增一个功能</td></tr><tr><td>fix</td><td>修复一个 Bug</td></tr><tr><td>docs</td><td>文档变更</td></tr><tr><td>style</td><td>代码格式（不影响功能，例如空格、分号等格式修正）</td></tr><tr><td>refactor</td><td>代码重构</td></tr><tr><td>perf</td><td>改善性能</td></tr><tr><td>test</td><td>测试</td></tr><tr><td>build</td><td>变更项目构建或外部依赖（例如 scopes: webpack、gulp、npm 等）</td></tr><tr><td>ci</td><td>更改持续集成软件的配置文件和 package 中的 scripts 命令，例如 scopes: Travis, Circle 等</td></tr><tr><td>chore</td><td>变更构建流程或辅助工具</td></tr><tr><td>revert</td><td>代码回退</td></tr></tbody></table><h3 id="scope" tabindex="-1"><a class="header-anchor" href="#scope" aria-hidden="true">#</a> scope</h3><p>scope 用于指定本次 commit 影响的范围。scope 依据项目而定，例如在业务项目中可以依据菜单或者功能模块划分，如果是组件库开发，则可以依据组件划分。（scope 可省略）</p><h3 id="subject" tabindex="-1"><a class="header-anchor" href="#subject" aria-hidden="true">#</a> subject</h3><p>subject 是本次 commit 的简洁描述，长度约定在 50 个字符以内，通常遵循以下几个规范：</p><ul><li>用动词开头，第一人称现在时表述，例如：change 代替 changed 或 changes</li><li>第一个字母小写</li><li>结尾不加句号（.）</li></ul><h2 id="body" tabindex="-1"><a class="header-anchor" href="#body" aria-hidden="true">#</a> Body</h2><p>body 是对本次 commit 的详细描述，可以分成多行。（body 可省略）</p><p>跟 subject 类似，用动词开头，body 应该说明修改的原因和更改前后的行为对比。</p><h2 id="footer" tabindex="-1"><a class="header-anchor" href="#footer" aria-hidden="true">#</a> Footer</h2><p>如果本次提交的代码是突破性的变更或关闭缺陷，则 Footer 必需，否则可以省略。</p><ul><li><p>突破性的变更</p><p>当前代码与上一个版本有突破性改变，则 Footer 以 BREAKING CHANGE 开头，后面是对变动的描述、以及变动的理由。</p></li><li><p>关闭缺陷</p></li></ul><h1 id="集成-commitizen-实现规范提交" tabindex="-1"><a class="header-anchor" href="#集成-commitizen-实现规范提交" aria-hidden="true">#</a> 集成 Commitizen 实现规范提交</h1><p>Commitizen 是一个帮助撰写规范 commit message 的工具。它有一个命令行工具 cz-cli。</p><h2 id="安装-commitizen" tabindex="-1"><a class="header-anchor" href="#安装-commitizen" aria-hidden="true">#</a> 安装 Commitizen</h2><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npm install commitizen -D		//	若git cz指令不执行则可全局安装解决 -g
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="初始化项目" tabindex="-1"><a class="header-anchor" href="#初始化项目" aria-hidden="true">#</a> 初始化项目</h2><p>成功安装 Commitizen 后，用 <strong>cz-conventional-changelog</strong> 适配器来初始化项目：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npx commitizen init cz-conventional-changelog --save-dev --save-exact
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>这行命令做了两件事：</p><ul><li><p>安装 cz-conventional-changelog 到开发依赖（devDependencies）</p></li><li><p>在 <code>package.json</code> 中增加了 <code>config.commitizen</code></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>&quot;config&quot;: {
  &quot;commitizen&quot;: {
    &quot;path&quot;: &quot;./node_modules/cz-conventional-changelog&quot;
  }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/41d7516e310144fa9ab3d28b27d1b250~tplv-k3u1fbpfcp-zoom-1.image" alt="image"></p><h2 id="使用-commitizen" tabindex="-1"><a class="header-anchor" href="#使用-commitizen" aria-hidden="true">#</a> 使用 Commitizen</h2><p>以前提交代码都是 <code>git commit -m &quot;xxx&quot;</code>，现在改为 <code>git cz</code>，然后按照终端操作提示，逐步填入信息，就能自动生成规范的 commit message。</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d5bc364437b54bad9946fd43daaf10e7~tplv-k3u1fbpfcp-zoom-1.image" alt="image"> <img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/39d3441db8f54398b8344c803ef1325e~tplv-k3u1fbpfcp-zoom-1.image" alt="image"></p><h2 id="自定义配置提交说明" tabindex="-1"><a class="header-anchor" href="#自定义配置提交说明" aria-hidden="true">#</a> 自定义配置提交说明</h2><p><code>git cz</code> 终端操作提示都是英文的，如果想改成中文的或者自定义这些配置选项，使用 <strong>cz-customizable</strong> 适配器。</p><h3 id="cz-customizable-初始化项目" tabindex="-1"><a class="header-anchor" href="#cz-customizable-初始化项目" aria-hidden="true">#</a> cz-customizable 初始化项目</h3><p>运行如下命令使用 cz-customizable 初始化项目，注意之前已经初始化过一次，这次再初始化，需要加 <code>--force</code> 覆盖。</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npx commitizen init cz-customizable --save-dev --save-exact --force
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>这行命令做了两件事：</p><ul><li><p>安装 cz-customizable 到开发依赖（devDependencies）</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  ...
  <span class="token property">&quot;cz-customizable&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^6.3.0&quot;</span><span class="token punctuation">,</span>
  ...
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>修改 <code>package.json</code> 中的 <code>config.commitizen</code> 字段为：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token property">&quot;config&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;commitizen&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./node_modules/cz-customizable&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h3 id="使用-cz-customizable" tabindex="-1"><a class="header-anchor" href="#使用-cz-customizable" aria-hidden="true">#</a> 使用 cz-customizable</h3>`,56),z=s("code",null,".cz-config.js",-1),_={href:"https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fleoforfree%2Fcz-customizable%2Fblob%2Fmaster%2Fcz-config-EXAMPLE.js",target:"_blank",rel:"noopener noreferrer"},q=t(`<p>在本项目中修改成中文：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// type 类型（定义之后，可通过上下键选择）</span>
  <span class="token literal-property property">types</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&#39;feat&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;feat:     新增功能&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&#39;fix&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;fix:      修复 bug&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&#39;docs&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;docs:     文档变更&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&#39;style&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;style:    代码格式（不影响功能，例如空格、分号等格式修正）&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&#39;refactor&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;refactor: 代码重构（不包括 bug 修复、功能新增）&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&#39;perf&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;perf:     性能优化&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&#39;test&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;test:     添加、修改测试用例&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&#39;build&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;build:    构建流程、外部依赖变更（如升级 npm 包、修改 webpack 配置等）&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&#39;ci&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;ci:       修改 CI 配置、脚本&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&#39;chore&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;chore:    对构建过程或辅助工具和库的更改（不影响源文件、测试用例）&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&#39;revert&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;revert:   回滚 commit&#39;</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>

  <span class="token comment">// scope 类型（定义之后，可通过上下键选择）</span>
  <span class="token literal-property property">scopes</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token string">&#39;components&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;组件相关&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token string">&#39;hooks&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;hook 相关&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token string">&#39;utils&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;utils 相关&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token string">&#39;element-ui&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;对 element-ui 的调整&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token string">&#39;styles&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;样式相关&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token string">&#39;deps&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;项目依赖&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token string">&#39;auth&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;对 auth 修改&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token string">&#39;other&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;其他修改&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 如果选择 custom，后面会让你再输入一个自定义的 scope。也可以不设置此项，把后面的 allowCustomScopes 设置为 true</span>
    <span class="token punctuation">[</span><span class="token string">&#39;custom&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;以上都不是？我要自定义&#39;</span><span class="token punctuation">]</span>
  <span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>value<span class="token punctuation">,</span> description<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      value<span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>value<span class="token punctuation">.</span><span class="token function">padEnd</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> (</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>description<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">\`</span></span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

  <span class="token comment">// 是否允许自定义填写 scope，在 scope 选择的时候，会有 empty 和 custom 可以选择。</span>
  <span class="token comment">// allowCustomScopes: true,</span>

  <span class="token comment">// allowTicketNumber: false,</span>
  <span class="token comment">// isTicketNumberRequired: false,</span>
  <span class="token comment">// ticketNumberPrefix: &#39;TICKET-&#39;,</span>
  <span class="token comment">// ticketNumberRegExp: &#39;\\\\d{1,5}&#39;,</span>


  <span class="token comment">// 针对每一个 type 去定义对应的 scopes，例如 fix</span>
  <span class="token comment">/*
  scopeOverrides: {
    fix: [
      { name: &#39;merge&#39; },
      { name: &#39;style&#39; },
      { name: &#39;e2eTest&#39; },
      { name: &#39;unitTest&#39; }
    ]
  },
  */</span>

  <span class="token comment">// 交互提示信息</span>
  <span class="token literal-property property">messages</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;确保本次提交遵循 Angular 规范！\\n选择你要提交的类型：&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">scope</span><span class="token operator">:</span> <span class="token string">&#39;\\n选择一个 scope（可选）：&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// 选择 scope: custom 时会出下面的提示</span>
    <span class="token literal-property property">customScope</span><span class="token operator">:</span> <span class="token string">&#39;请输入自定义的 scope：&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">subject</span><span class="token operator">:</span> <span class="token string">&#39;填写简短精炼的变更描述：\\n&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">body</span><span class="token operator">:</span>
      <span class="token string">&#39;填写更加详细的变更描述（可选）。使用 &quot;|&quot; 换行：\\n&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">breaking</span><span class="token operator">:</span> <span class="token string">&#39;列举非兼容性重大的变更（可选）：\\n&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">footer</span><span class="token operator">:</span> <span class="token string">&#39;列举出所有变更的 ISSUES CLOSED（可选）。 例如: #31, #34：\\n&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">confirmCommit</span><span class="token operator">:</span> <span class="token string">&#39;确认提交？&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">// 设置只有 type 选择了 feat 或 fix，才询问 breaking message</span>
  <span class="token literal-property property">allowBreakingChanges</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;feat&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;fix&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>

  <span class="token comment">// 跳过要询问的步骤</span>
  <span class="token comment">// skipQuestions: [&#39;body&#39;, &#39;footer&#39;],</span>

  <span class="token comment">// subject 限制长度</span>
  <span class="token literal-property property">subjectLimit</span><span class="token operator">:</span> <span class="token number">100</span>
  <span class="token literal-property property">breaklineChar</span><span class="token operator">:</span> <span class="token string">&#39;|&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 支持 body 和 footer</span>
  <span class="token comment">// footerPrefix : &#39;ISSUES CLOSED:&#39;</span>
  <span class="token comment">// askForBreakingChangeFirst : true,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>结合项目实际情况来自定义配置提交规则，很多时候不需要写长描述，公可以把询问 body 和 footer 的步骤跳过（在 <code>.cz-config.js</code> 中修改成 <code>skipQuestions: [&#39;body&#39;, &#39;footer&#39;]</code>）。</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c52e04ef0cda442fbd6c5c58691f8751~tplv-k3u1fbpfcp-zoom-1.image" alt="image"></p><h1 id="集成-commitlint-验证提交规范" tabindex="-1"><a class="header-anchor" href="#集成-commitlint-验证提交规范" aria-hidden="true">#</a> 集成 commitlint 验证提交规范</h1><h2 id="安装-commitlint" tabindex="-1"><a class="header-anchor" href="#安装-commitlint" aria-hidden="true">#</a> 安装 commitlint</h2><p>安装 @commitlint/config-conventional 和 @commitlint/cli</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> i @commitlint/config-conventional @commitlint/cli <span class="token parameter variable">-D</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="配置-commitlint" tabindex="-1"><a class="header-anchor" href="#配置-commitlint" aria-hidden="true">#</a> 配置 commitlint</h2><ul><li><p>创建 commitlint.config.js 文件 在项目根目录下创建 <code>commitlint.config.js</code> 文件，并填入以下内容：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;@commitlint/config-conventional&#39;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>或直接使用快捷命令：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;module.exports = {extends: [&#39;@commitlint/config-conventional&#39;]}&quot;</span> <span class="token operator">&gt;</span> commitlint.config.js
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>使用 husky 的 <code>commit-msg</code> hook 触发验证提交信息的命令 我们使用 husky 命令在 <code>.husky</code> 目录下创建 <code>commit-msg</code> 文件，并在此执行 commit message 的验证命令。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>npx husky <span class="token function">add</span> .husky/commit-msg <span class="token string">&quot;npx --no-install commitlint --edit <span class="token variable">$1</span>&quot;</span>		//	若有命令不生效的问题 则手动创建
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4c7bd07fe6104f7599c1a17c9c2971bf~tplv-k3u1fbpfcp-zoom-1.image" alt="image"></p></li></ul><h2 id="commitlint-验证" tabindex="-1"><a class="header-anchor" href="#commitlint-验证" aria-hidden="true">#</a> commitlint 验证</h2><ul><li>不符合规范的提交信息 如下图，提交信息 <code>test commitlint</code> 不符合规范，提交失败。 <img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/dcce89c773b1424d88c915446be8d0eb~tplv-k3u1fbpfcp-zoom-1.image" alt="image"></li><li>符合规范的提交信息 如下图，提交信息 <code>test: commitlint test</code> 符合规范，成功提交到仓库。 <img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/190ba1b62d8d433faf3d221eb8fb5119~tplv-k3u1fbpfcp-zoom-1.image" alt="image"></li></ul><p>因为已在项目中集成 commitizen，建议用 <code>git cz</code> 来代替 <code>git commit</code> 提交代码，可以保证提交信息规范。</p><h1 id="生成-change-log" tabindex="-1"><a class="header-anchor" href="#生成-change-log" aria-hidden="true">#</a> 生成 Change log</h1><p>如果你的所有 Commit 都符合 Angular 格式，那么发布新版本时， Change log 就可以用脚本自动生成。生成的文档包括以下三个部分：</p><ul><li>New features</li><li>Bug fixes</li><li>Breaking changes.</li></ul><p>每个部分都会罗列相关的 commit ，并且有指向这些 commit 的链接。当然，生成的文档允许手动修改，所以发布前，你还可以添加其他内容。</p>`,17),S={href:"https://link.jianshu.com?t=https%3A%2F%2Fgithub.com%2Fajoslin%2Fconventional-changelog",target:"_blank",rel:"noopener noreferrer"},C=t(`<div class="language-ruby line-numbers-mode" data-ext="rb"><pre class="language-ruby"><code>$ npm install <span class="token operator">-</span>g conventional<span class="token operator">-</span>changelog
$ cd my<span class="token operator">-</span>project
$ conventional<span class="token operator">-</span>changelog <span class="token operator">-</span>p angular <span class="token operator">-</span>i <span class="token constant">CHANGELOG</span><span class="token punctuation">.</span>md <span class="token operator">-</span>w
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1);function E(F,L){const a=o("ExternalLinkIcon");return i(),c("div",null,[r,s("ol",d,[s("li",null,[n("配置 "),u,n(" 关于更多配置项信息，查看 "),s("a",m,[n("Prettier-Options"),e(a)]),n(" 。")])]),k,s("p",null,[s("a",v,[n("ESLint"),e(a)]),n(" 是一款用于查找并报告代码中问题的工具，并且支持部分问题自动修复。其核心是通过对代码解析得到的 AST（Abstract Syntax Tree 抽象语法树）进行模式匹配，来分析代码达到检查代码质量和风格问题的能力。")]),b,s("blockquote",null,[s("p",null,[s("a",g,[n("husky"),e(a)]),n(" —— Git Hook 工具，可以设置在 git 各个阶段（"),h,n("、"),f,n("、"),y,n(" 等）触发我们的命令。 "),s("a",x,[n("lint-staged"),e(a)]),n(" —— 在 git 暂存的文件上运行 linters。")])]),j,s("p",null,[n("在项目根目录下创建 "),z,n(" 文件，然后按照官方提供的"),s("a",_,[n("示例"),e(a)]),n("来配置。")]),q,s("p",null,[s("a",S,[n("conventional-changelog"),e(a)]),n(" 就是生成 Change log 的工具，运行下面的命令即可。")]),C])}const A=p(l,[["render",E],["__file","shixiankaifaguifanhua.html.vue"]]);export{A as default};
